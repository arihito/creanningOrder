<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Creanning Order</title>
        <meta name="description" content="Creanning Order">
        <link rel="icon" href="images/favicon.png" type="image/png">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <div class="container">
            <h1 class="h1 my-3">掃除当番ランダム割り当て</h1>
            <textarea class="form-control" name="names" rows="2" autofocus></textarea>
            <div class="d-grid mx-auto my-3">
                <button class="btn btn-secondary text-center" id="submit">送信</button>
            </div>
            <div id="display"></div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            const orderArr = [
                {
                    "area": "床 (全部屋)",
                    "detail": "荷物をどかし、ほうきでゴミを取った後、クイックルワイパーでクリーニング(テーブル下のゴミや配線に注意)",
                    "img": "00"
                },
                {
                    "area": "机の上 (全部屋)",
                    "detail": "余計なモノはどかす。マウス跡をヘラで取る。雑巾で水拭き、除菌スプレー、乾拭き(電源タップや消毒スプレーの整頓)",
                    "img": "01"
                },
                {
                    "area": "流し台",
                    "detail": "シンクをスポンジで掃除し乾拭き、ポット、レンジの拭き掃除、排水溝のゴミ掃除(コーヒー砂糖やフレッシュ、お茶のパックが少なければ講師に補充依頼)",
                    "img": "02"
                },
                {
                    "area": "トイレ",
                    "detail": "便器内をブラシで掃除、便器をトイレクイックルで掃除(トイレットペーパー、サニタリーボックス(女性が対応)の確認)",
                    "img": "03"
                },
                {
                    "area": "下駄箱と玄関",
                    "detail": "塵取りで靴棚と玄関の掃除、棚上を拭く(ゴミが落ちてないか確認)",
                    "img": "04"
                },
                {
                    "area": "パーテーションと窓 (全部屋)",
                    "detail": "消毒液とちり紙、窓は雑巾で水拭き(パーテーションは割れやすいので丁寧に扱う)",
                    "img": "05"
                },
                {
                    "area": "椅子",
                    "detail": "座椅子と背もたれを埃取りブラシの後、固く絞った雑巾で拭く(裏ネジが取れてないか確認、時間があれば椅子を上げてタイヤも拭く)",
                    "img": "06"
                },
                {
                    "area": "床 (全部屋)",
                    "detail": "荷物をどかし、ほうきでゴミを取った後、クイックルワイパーでクリーニング(テーブル下のゴミや配線に注意)",
                    "img": "00"
                },
                {
                    "area": "机の上 (全部屋)",
                    "detail": "余計なモノはどかす。マウス跡をヘラで取る。雑巾で水拭き、除菌スプレー、乾拭き(電源タップや消毒スプレーの整頓)",
                    "img": "01"
                },
                {
                    "area": "流し台",
                    "detail": "シンクをスポンジで掃除し乾拭き、ポット、レンジの拭き掃除、排水溝のゴミ掃除(コーヒー砂糖やフレッシュ、お茶のパックが少なければ講師に補充依頼)",
                    "img": "02"
                },
                {
                    "area": "床 (全部屋)",
                    "detail": "荷物をどかし、ほうきでゴミを取った後、クイックルワイパーでクリーニング(テーブル下のゴミや配線に注意)",
                    "img": "00"
                },
            ]

            document.querySelector('#submit').onclick = () => {
                const display = document.querySelector('#display')
                const names = document.getElementsByName('names')[0].value.split(/\n|\t/)

                let table = document.createElement('table')
                arrayShuffle(names).forEach((value, idx) => {
                    const tr = document.createElement('tr')
                    const th = document.createElement('th')
                    const tdArea = document.createElement('td')
                    const tdImg = document.createElement('td')
                    const img = document.createElement('img')
                    const tdDetail = document.createElement('td')
                    th.innerText = value
                    tdArea.appendChild(document.createTextNode(orderArr[idx].area))
                    img.setAttribute('src', 'images/' + orderArr[idx].img + '.jpg')
                    tdImg.appendChild(img)
                    tdDetail.appendChild(document.createTextNode(orderArr[idx].detail))
                    tr.appendChild(th)
                    tr.appendChild(tdArea)
                    tr.appendChild(tdImg)
                    tr.appendChild(tdDetail)
                    table.appendChild(tr)
                })
                display.appendChild(table)
            }

            function arrayShuffle(array) {
                for (let i = (array.length - 1); 0 < i; i--) {
                    let r = Math.floor(Math.random() * (i + 1));
                    let tmp = array[i];
                    array[i] = array[r];
                    array[r] = tmp;
                }
                return array;
            }
        </script>
    </body>
</html>
